services:
  - type: web
    name: skillvouch-backend
    env: node
    plan: free
    rootDir: backend
    buildCommand: npm install
    startCommand: node server.js
    healthCheckPath: /health
    envVars:
      - key: PORT
        value: 3000
      - key: NODE_ENV
        value: production

      # Mistral AI – get your key at https://console.mistral.ai/
      - key: MISTRAL_API_KEY
        sync: false

      # OpenRouter (alternative LLM routing) – optional
      - key: LLAMA_API_KEY
        sync: false
      - key: LLAMA_API_URL
        value: https://openrouter.ai/api/v1
      - key: OPENROUTER_HTTP_REFERER
        sync: false
      - key: OPENROUTER_APP_TITLE
        value: SkillVouch AI

      # MySQL database credentials
      - key: MYSQL_HOST
        sync: false
      - key: MYSQL_PORT
        value: "3306"
      - key: MYSQL_USER
        sync: false
      - key: MYSQL_PASSWORD
        sync: false
      - key: MYSQL_DATABASE
        sync: false

      # CORS – set to your Vercel frontend URL(s), comma-separated if multiple
      # Example: https://skillvouch.vercel.app
      - key: ALLOWED_ORIGIN
        sync: false
